<section class="project">
  <!-- 1. Barre cr√©ation projet sur une seule ligne -->
  <div class="creationPanel one-line">
    <form (ngSubmit)="addProject()" style="display: flex; gap: 12px; align-items: flex-end">
      <input
        type="text"
        [(ngModel)]="newProject.name"
        name="name"
        placeholder="Nom"
        required
        style="flex: 1 1 18vw"
      />
      <input
        type="date"
        [(ngModel)]="newProject.startDate"
        name="startDate"
        required
        style="flex: 1 1 13vw"
      />
      <textarea
        [(ngModel)]="newProject.description"
        name="description"
        rows="1"
        placeholder="Description"
        style="flex: 2 1 30vw; resize: none"
      ></textarea>
      <button type="submit" style="flex: 0 0 70px">Cr√©er</button>
    </form>
  </div>

  <!-- 2. Slider projets de l'utilisateur -->
  <div class="sliderPanel">
    <div class="sliderTitle">Mes projets</div>
    <div class="slider">
      @if (userProjects.length > 0) {
        @for (project of userProjects; track trackByProjectId($index, project)) {
        <div
          class="sliderItem"
          (click)="openEdit(project)"
        >
          <div class="emojiContainer">
            @if (canAccessProject(project, 'edit')) {<span class="emoji">‚úèÔ∏è</span>}
            @if (!canAccessProject(project, 'edit') && canAccessProject(project, 'view')) {<span class="emoji">üëÄ</span>}
          </div>
          <div class="sliderName">{{ project.name }}</div>
          <div class="sliderDesc">{{ project.description }}</div>
        </div>
        }
      } @else {
        <div class="sliderItem sliderEmpty">Aucun projet</div>
      }
    </div>
  </div>

  <!-- 3. Liste compl√®te de tous les projets -->
  <div class="projectContainer">
    <h2>Tous les projets</h2>
    <ul>
      @for (project of projects; track trackByProjectId($index, project)) {
      <li
        class="clickable"
        (click)="openEdit(project)"
        [class.disabled]="!canAccessProject(project, 'edit') && !canAccessProject(project, 'view')"
        tabindex="0"
        style="cursor: pointer"
      >
        <div>{{ project.name }}</div>
        <div>{{ project.startDate }}</div>
        <div>{{ project.description }}</div>
        <div style="display: flex; align-items: center; justify-content: center">
          @if (canAccessProject(project, 'edit')) {<span>‚úèÔ∏è</span>}
          @if (!canAccessProject(project, 'edit') && canAccessProject(project, 'view')) {<span>üëÄ</span>}
        </div>
      </li>
      }
    </ul>
  </div>
</section>
